"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[45],{9045:(e,s,a)=>{a.r(s),a.d(s,{default:()=>M});var l=a(2791),r=a(9434),n=a(7689),t=a(3473),c=a(3588),i=a(3655),d=a(6106),o=a(914),u=a(9657),m=a(7128),p=a(7462);const h={icon:function(e,s){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:e}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm193.4 225.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.3 0 19.9 5 25.9 13.3l71.2 98.8 157.2-218c6-8.4 15.7-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.4 12.7z",fill:s}},{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z",fill:e}}]}},name:"check-circle",theme:"twotone"};var v=a(4291),x=function(e,s){return l.createElement(v.Z,(0,p.Z)({},e,{ref:s,icon:h}))};const j=l.forwardRef(x);var f=a(2074),g=a(7027),y=a(4422),Z=a(7309),b=a(2254),w=a(8868),_=a(184);const P=function(e){let{plan:s}=e;const a=(0,c.useStripe)(),t=(0,c.useElements)(),i=(0,n.s0)(),d=(0,r.I0)(),o=(0,r.v9)((e=>e.auth.user)),[u,m]=(0,l.useState)(!1),[p,h]=(0,l.useState)((()=>o.pm_last_four?1:2));return(0,_.jsxs)("div",{className:"grid gap-4 m-auto",children:[o.pm_last_four&&(0,_.jsx)("div",{children:(0,_.jsxs)(y.ZP.Group,{onChange:e=>{h(e.target.value)},value:p,children:[(0,_.jsx)(y.ZP,{value:1,children:"Use old card"}),(0,_.jsx)(y.ZP,{value:2,children:"Use new Card"})]})}),2==p&&(0,_.jsx)(c.CardElement,{className:"border border-solid border-gray-400 py-3 px-4 rounded"}),(0,_.jsx)(Z.ZP,{loading:u,size:"large",type:"primary",onClick:async()=>{try{var e,l,r,n,u,h,v;let x;m(!0),2===p&&(x=await(null===a||void 0===a?void 0:a.createPaymentMethod({type:"card",card:t.getElement(c.CardElement),billing_details:{name:o.name,email:o.email}})));const j=await(0,b.XW)({paymentMethod:null===(e=x)||void 0===e||null===(l=e.paymentMethod)||void 0===l?void 0:l.id,planId:s._id,pm_type:null===(r=x)||void 0===r||null===(n=r.paymentMethod)||void 0===n?void 0:n.card.brand,pm_last_four:null===(u=x)||void 0===u||null===(h=u.paymentMethod)||void 0===h?void 0:h.card.last4});let f;j.data.clientSecret&&(f=await(null===a||void 0===a?void 0:a.confirmCardPayment(j.data.clientSecret))),null!==(v=f)&&void 0!==v&&v.error?g.ZP.error(f.error.message):(g.ZP.info("Subscribed successfully!"),d((0,w.p_)({plan:{}})),i("/home")),m(!1)}catch(f){var x,j;console.log(f),m(!1),null!==(x=f.response)&&void 0!==x&&null!==(j=x.data)&&void 0!==j&&j.message?g.ZP.error(f.response.data.message):f.message&&g.ZP.error(f.message)}},disabled:!a,children:"Subscribe"})]})};var S=a(5169);const{Title:N,Text:C}=i.default,E=(0,t.J)(S.Z.stripePK);const M=function(){const{slug:e}=(0,n.UO)(),s=(0,r.v9)((s=>{let a=s.plan.plans.filter((s=>s.slug===e));return a.length>0?a[0]:{}})),a=(0,r.I0)();return(0,l.useEffect)((()=>{s._id||a((0,f.qY)())}),[]),(0,_.jsx)("div",{className:"container mx-auto my-4",children:(0,_.jsxs)(d.Z,{gutter:[16,16],children:[(0,_.jsx)(o.Z,{span:24,children:(0,_.jsx)(N,{level:3,className:"text-center mt-5",children:"Subscribe now!"})}),(0,_.jsx)(o.Z,{span:24,className:"flex justify-center",children:(0,_.jsxs)(u.default,{className:"shadow-lg max-w-md",children:[(0,_.jsxs)("div",{children:[(0,_.jsx)(N,{level:4,children:s.name}),(0,_.jsx)(C,{type:"secondary",className:"word-break",children:s.description})]}),(0,_.jsx)(m.Z,{}),s.price>0&&(0,_.jsxs)(N,{level:3,children:["$",s.price,(0,_.jsx)(C,{type:"secondary",children:"/month"})]}),0==s.price&&(0,_.jsx)(N,{level:3,children:"Free"}),s.services&&s.services.map(((e,s)=>(0,_.jsxs)("div",{className:"my-2",children:[(0,_.jsx)(j,{})," ",(0,_.jsx)("span",{className:"text-lg",children:e})]},s))),(0,_.jsx)("div",{className:"mt-4",children:(0,_.jsx)(c.Elements,{stripe:E,nonce:"random-nonce",children:(0,_.jsx)(P,{plan:s})})})]})},s._id)]})})}},2254:(e,s,a)=>{a.d(s,{XW:()=>n,om:()=>t,rE:()=>r});var l=a(3352);const r=()=>(0,l.A_)("plans/getUserSubscription"),n=e=>(0,l.j0)("plans/createSubscription",e),t=e=>(0,l.j0)("plans/increasePlanLimit",e)},914:(e,s,a)=>{a.d(s,{Z:()=>l});const l=a(9752).Z},6106:(e,s,a)=>{a.d(s,{Z:()=>l});const l=a(7545).Z}}]);
//# sourceMappingURL=45.fe5c38db.chunk.js.map