{"version":3,"file":"static/js/45.0627b0f9.chunk.js","mappings":"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","sources":["../node_modules/@ant-design/icons-svg/es/asn/CheckCircleTwoTone.js","../node_modules/@ant-design/icons/es/icons/CheckCircleTwoTone.js","container/pages/Price/Partials/CheckoutForm.jsx","container/pages/Price/Subscription.jsx","services/planAPI.js","../node_modules/antd/es/col/index.js","../node_modules/antd/es/row/index.js"],"sourcesContent":["// This icon file is generated automatically.\nvar CheckCircleTwoTone = { \"icon\": function render(primaryColor, secondaryColor) { return { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z\", \"fill\": primaryColor } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm193.4 225.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.3 0 19.9 5 25.9 13.3l71.2 98.8 157.2-218c6-8.4 15.7-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.4 12.7z\", \"fill\": secondaryColor } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z\", \"fill\": primaryColor } }] }; }, \"name\": \"check-circle\", \"theme\": \"twotone\" };\nexport default CheckCircleTwoTone;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport CheckCircleTwoToneSvg from \"@ant-design/icons-svg/es/asn/CheckCircleTwoTone\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar CheckCircleTwoTone = function CheckCircleTwoTone(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: CheckCircleTwoToneSvg\n  }));\n};\n\n/**![check-circle](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTUxMiA2NEMyNjQuNiA2NCA2NCAyNjQuNiA2NCA1MTJzMjAwLjYgNDQ4IDQ0OCA0NDggNDQ4LTIwMC42IDQ0OC00NDhTNzU5LjQgNjQgNTEyIDY0em0wIDgyMGMtMjA1LjQgMC0zNzItMTY2LjYtMzcyLTM3MnMxNjYuNi0zNzIgMzcyLTM3MiAzNzIgMTY2LjYgMzcyIDM3Mi0xNjYuNiAzNzItMzcyIDM3MnoiIGZpbGw9IiMxNjc3ZmYiIC8+PHBhdGggZD0iTTUxMiAxNDBjLTIwNS40IDAtMzcyIDE2Ni42LTM3MiAzNzJzMTY2LjYgMzcyIDM3MiAzNzIgMzcyLTE2Ni42IDM3Mi0zNzItMTY2LjYtMzcyLTM3Mi0zNzJ6bTE5My40IDIyNS43bC0yMTAuNiAyOTJhMzEuOCAzMS44IDAgMDEtNTEuNyAwTDMxOC41IDQ4NC45Yy0zLjgtNS4zIDAtMTIuNyA2LjUtMTIuN2g0Ni45YzEwLjMgMCAxOS45IDUgMjUuOSAxMy4zbDcxLjIgOTguOCAxNTcuMi0yMThjNi04LjQgMTUuNy0xMy4zIDI1LjktMTMuM0g2OTljNi41IDAgMTAuMyA3LjQgNi40IDEyLjd6IiBmaWxsPSIjZTZmNGZmIiAvPjxwYXRoIGQ9Ik02OTkgMzUzaC00Ni45Yy0xMC4yIDAtMTkuOSA0LjktMjUuOSAxMy4zTDQ2OSA1ODQuM2wtNzEuMi05OC44Yy02LTguMy0xNS42LTEzLjMtMjUuOS0xMy4zSDMyNWMtNi41IDAtMTAuMyA3LjQtNi41IDEyLjdsMTI0LjYgMTcyLjhhMzEuOCAzMS44IDAgMDA1MS43IDBsMjEwLjYtMjkyYzMuOS01LjMuMS0xMi43LTYuNC0xMi43eiIgZmlsbD0iIzE2NzdmZiIgLz48L3N2Zz4=) */\nvar RefIcon = /*#__PURE__*/React.forwardRef(CheckCircleTwoTone);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'CheckCircleTwoTone';\n}\nexport default RefIcon;","import React, { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Button, Input, Radio, message } from \"antd\";\r\nimport { CardElement, useElements, useStripe } from \"@stripe/react-stripe-js\";\r\n\r\nimport { createSubscription } from \"../../../../services/planAPI\";\r\nimport { getPlanSuccess } from \"../../../../redux/auth/authSlice\";\r\n\r\nfunction CheckoutForm({ plan }) {\r\n  // stripe items\r\n  const stripe = useStripe();\r\n  const elements = useElements();\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n  const user = useSelector((state) => state.auth.user);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [value, setValue] = useState(() => {\r\n    if (user.pm_last_four) {\r\n      return 1;\r\n    } else {\r\n      return 2;\r\n    }\r\n  });\r\n\r\n  // main function\r\n  const handleCreateSubscription = async () => {\r\n    try {\r\n      setLoading(true);\r\n      // create a payment method\r\n      let paymentMethod;\r\n      if (value === 2) {\r\n        paymentMethod = await stripe?.createPaymentMethod({\r\n          type: \"card\",\r\n          card: elements.getElement(CardElement),\r\n          billing_details: {\r\n            name: user.name,\r\n            email: user.email,\r\n          },\r\n        });\r\n      }\r\n      \r\n      // call the backend to create subscription\r\n      const response = await createSubscription({\r\n        paymentMethod: paymentMethod?.paymentMethod?.id,\r\n        planId: plan._id,\r\n        pm_type: paymentMethod?.paymentMethod?.card.brand,\r\n        pm_last_four: paymentMethod?.paymentMethod?.card.last4,\r\n      });\r\n\r\n      let confirmPayment;\r\n      if (response.data.clientSecret) {\r\n        confirmPayment = await stripe?.confirmCardPayment(\r\n          response.data.clientSecret\r\n        );\r\n      }\r\n\r\n      if (confirmPayment?.error) {\r\n        message.error(confirmPayment.error.message);\r\n      } else {\r\n        message.info(\"Subscribed successfully!\");\r\n        dispatch(getPlanSuccess({ plan: {} }));\r\n        navigate(\"/home\");\r\n      }\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n      if (error.response?.data?.message) {\r\n        message.error(error.response.data.message);\r\n      } else if (error.message) {\r\n        message.error(error.message);\r\n      }\r\n    }\r\n  };\r\n\r\n  const onChange = (e) => {\r\n    // console.log('radio checked', e.target.value);\r\n    setValue(e.target.value);\r\n  };\r\n\r\n  return (\r\n    <div className=\"grid gap-4 m-auto\">\r\n      {user.pm_last_four && (\r\n        <div>\r\n          <Radio.Group onChange={onChange} value={value}>\r\n            <Radio value={1}>Use old card</Radio>\r\n            <Radio value={2}>Use new Card</Radio>\r\n          </Radio.Group>\r\n        </div>\r\n      )}\r\n      {value == 2 && (\r\n        <CardElement className=\"border border-solid border-gray-400 py-3 px-4 rounded\" />\r\n      )}\r\n      <Button\r\n        loading={loading}\r\n        size=\"large\"\r\n        type=\"primary\"\r\n        onClick={handleCreateSubscription}\r\n        disabled={!stripe}\r\n      >\r\n        Subscribe\r\n      </Button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CheckoutForm;\r\n","import React, { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport { Elements } from \"@stripe/react-stripe-js\";\r\nimport { Card, Col, Divider, Row, Typography } from \"antd\";\r\nimport { CheckCircleTwoTone } from \"@ant-design/icons\";\r\nimport { getPlans } from \"../../../redux/plan/planSlice\";\r\nimport CheckoutForm from \"./Partials/CheckoutForm\";\r\nimport constants from \"../../../config/constants\";\r\n\r\nconst { Title, Text } = Typography;\r\n// const stripePromise = loadStripe(\"pk_test_51MqDHeIhTKltFnGq3WGCHjZi5ZfUg5T8aiGVPa7XFZcrse4SGLvTjDbXDNb5inKjlOaJqHJRDv5HsPQ6tbnfsxRL00rwetwKzu\");\r\nconst stripePromise = loadStripe(constants.stripePK); // Julian Live\r\nfunction Lists() {\r\n  const { slug } = useParams();\r\n  const plan = useSelector((state) => {\r\n    let sel = state.plan.plans.filter((plan) => plan.slug === slug);\r\n    if (sel.length > 0) {\r\n      return sel[0];\r\n    }\r\n    return {};\r\n  });\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (!plan._id) {\r\n      dispatch(getPlans());\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"container mx-auto my-4\">\r\n      <Row gutter={[16, 16]}>\r\n        <Col span={24}>\r\n          <Title level={3} className=\"text-center mt-5\">\r\n            Subscribe now!\r\n          </Title>\r\n        </Col>\r\n        <Col span={24} key={plan._id} className=\"flex justify-center\">\r\n          <Card className=\"shadow-lg max-w-md\">\r\n            <div>\r\n              <Title level={4}>{plan.name}</Title>\r\n              <Text type=\"secondary\" className=\"word-break\">\r\n                {plan.description}\r\n              </Text>\r\n            </div>\r\n            <Divider />\r\n            {plan.price > 0 && (\r\n              <Title level={3}>\r\n                ${plan.price}\r\n                <Text type=\"secondary\">/month</Text>\r\n              </Title>\r\n            )}\r\n            {plan.price == 0 && <Title level={3}>Free</Title>}\r\n            {plan.services &&\r\n              plan.services.map((service, index) => (\r\n                <div className=\"my-2\" key={index}>\r\n                  <CheckCircleTwoTone />{\" \"}\r\n                  <span className=\"text-lg\">{service}</span>\r\n                </div>\r\n              ))}\r\n            <div className=\"mt-4\">\r\n              <Elements stripe={stripePromise} nonce=\"random-nonce\">\r\n                <CheckoutForm plan={plan} />\r\n              </Elements>\r\n            </div>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Lists;\r\n","import { getRequest, postRequest, putRequest } from \"./axiosClient\";\r\n\r\nexport const getUserSubscription = () => getRequest('plans/getUserSubscription');\r\nexport const cancelSubscription = (data) => putRequest('plans/cancelSubscription', data);\r\nexport const createSubscription = (data) => postRequest('plans/createSubscription', data);\r\nexport const increasePlanLimit = (data) => postRequest('plans/increasePlanLimit', data);","\"use client\";\n\nimport { Col } from '../grid';\nexport default Col;","\"use client\";\n\nimport { Row } from '../grid';\nexport default Row;"],"names":["primaryColor","secondaryColor","CheckCircleTwoTone","props","ref","React","AntdIcon","_extends","icon","CheckCircleTwoToneSvg","_ref","plan","stripe","useStripe","elements","useElements","navigate","useNavigate","dispatch","useDispatch","user","useSelector","state","auth","loading","setLoading","useState","value","setValue","pm_last_four","_jsxs","className","children","_jsx","Radio","onChange","e","target","CardElement","Button","size","type","onClick","async","_paymentMethod","_paymentMethod$paymen","_paymentMethod2","_paymentMethod2$payme","_paymentMethod3","_paymentMethod3$payme","_confirmPayment","paymentMethod","createPaymentMethod","card","getElement","billing_details","name","email","response","createSubscription","id","planId","_id","pm_type","brand","last4","confirmPayment","data","clientSecret","confirmCardPayment","error","message","getPlanSuccess","_error$response","_error$response$data","console","log","disabled","Title","Text","Typography","stripePromise","loadStripe","constants","slug","useParams","sel","plans","filter","length","useEffect","getPlans","Row","gutter","Col","span","level","Card","description","Divider","price","services","map","service","index","Elements","nonce","CheckoutForm","getUserSubscription","getRequest","postRequest","increasePlanLimit"],"sourceRoot":""}