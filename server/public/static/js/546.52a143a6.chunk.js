"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[546],{5546:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var l=a(2791),n=a(1087),r=a(2426),i=a.n(r),s=a(9389),c=a(7846),o=a(2339),d=a(1431),u=a(3099),m=a(7309),p=a(6106),h=a(914),x=a(4701),g=a(937),j=a(9428),y=a(7027),v=a(2706),S=a(3352);const Z=e=>{const[t,a]=(0,l.useState)(e);return[t,e=>{const{name:l,value:n}=e.target;a({...t,[l]:n})},()=>{a(e)}]};var k=a(2254),_=a(184);const{Search:I}=s.default;const f=function(){const[e,t]=(0,l.useState)(!1),[a,r]=(0,l.useState)([]),[s,f]=(0,l.useState)(1),[C,w]=(0,l.useState)(0),[z,b]=(0,l.useState)(!1),[P,U]=(0,l.useState)(10),[N,T]=(0,l.useState)(null),[A,F]=Z({}),[M]=c.Z.useForm(),D=[{title:"No",dataIndex:"_id",key:"no",width:"50px",render:(e,t,a)=>(s-1)*P+a+1},{title:"Name",dataIndex:"name",key:"name"},{title:"Email",dataIndex:"email",key:"email"},{title:"\ud83d\uded2",dataIndex:"_id",key:"activeSubscriptionId",render:(e,t)=>{var a,l,n,r;if(null!==(a=t.activeSubscriptionId)&&void 0!==a&&null!==(l=a.planId)&&void 0!==l&&l.price)return(0,_.jsxs)(o.Z,{color:"#108ee9",children:["$",null===(n=t.activeSubscriptionId)||void 0===n||null===(r=n.planId)||void 0===r?void 0:r.price]})}},{title:"Plan",dataIndex:"plan",key:"plan",render:(e,t)=>{if(t.plan)return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(d.Z,{placement:"top",title:"Property",children:(0,_.jsx)(o.Z,{color:"#108ee9",children:e.property})}),(0,_.jsx)(d.Z,{placement:"top",title:"Document",children:(0,_.jsx)(o.Z,{color:"#108ee9",children:e.document})})]})}},{title:"UTM source",dataIndex:"utm_source",key:"utm_source"},{title:"UTM medium",dataIndex:"utm_medium",key:"utm_medium"},{title:"UTM compaign",dataIndex:"utm_compaign",key:"utm_compaign"},{title:"UTM content",dataIndex:"utm_content",key:"utm_content"},{title:"Date",dataIndex:"createdAt",key:"createdAt",render:e=>i()(e).format("MM/DD/YY hh:mm A")},{title:"Action",key:"_id",render:(e,a)=>(0,_.jsxs)(u.Z,{size:"middle",children:[(0,_.jsx)(m.ZP,{type:"primary",size:"small",onClick:()=>{var e,l;T(a),M.setFieldValue("property",(null===(e=a.plan)||void 0===e?void 0:e.property)||1),M.setFieldValue("document",(null===(l=a.plan)||void 0===l?void 0:l.document)||1),t(!0)},children:"Give"}),(0,_.jsx)(n.rU,{to:"/admin/users/".concat(a._id,"/history"),children:(0,_.jsx)(m.ZP,{type:"dashed",danger:!0,size:"small",children:"View"})})]})}];(0,l.useEffect)((()=>{E()}),[s,P]);const E=e=>{b(!0),(async e=>{try{return(await(0,S.A_)("users",e)).data}catch(t){return console.log("[GET users error]",t),{users:[],total:0}}})({...A,page:e||s,limit:P}).then((e=>{b(!1),r(e.users.map((e=>({...e,key:e._id})))),w(e.total)}))},V=()=>{1==s?E(1):f(1)};return(0,_.jsxs)("div",{className:"container mx-auto my-4",children:[(0,_.jsxs)(p.Z,{gutter:[16,16],children:[(0,_.jsx)(h.Z,{sm:12,md:8,lg:6,xl:4,children:(0,_.jsx)(I,{placeholder:"Name...",allowClear:!0,value:A.name,name:"name",size:"large",onChange:F,onSearch:V})}),(0,_.jsx)(h.Z,{sm:12,md:8,lg:6,xl:4,children:(0,_.jsx)(I,{placeholder:"Email...",allowClear:!0,value:A.email,name:"email",size:"large",onChange:F,onSearch:V})}),(0,_.jsx)(h.Z,{sm:12,md:8,lg:6,xl:4,children:(0,_.jsx)(I,{placeholder:"Utm Source...",allowClear:!0,value:A.utm_source,name:"utm_source",size:"large",onChange:F,onSearch:V})}),(0,_.jsx)(h.Z,{sm:12,md:8,lg:6,xl:4,children:(0,_.jsx)(I,{placeholder:"Utm Campaign...",allowClear:!0,value:A.utm_campaign,name:"utm_campaign",size:"large",onChange:F,onSearch:V})}),(0,_.jsxs)(h.Z,{span:24,children:[(0,_.jsx)(x.Z,{loading:z,columns:D,dataSource:a,pagination:!1}),(0,_.jsx)("div",{className:"text-right mt-2",children:(0,_.jsx)(g.Z,{showQuickJumper:!0,showSizeChanger:!0,pageSize:P,current:s,total:C,onChange:(e,t)=>{f(e),U(t)}})})]})]}),(0,_.jsx)(j.Z,{open:e,title:"Increase plan",okText:"Submit",cancelText:"Cancel",onCancel:()=>t(!1),onOk:()=>{M.validateFields().then((async e=>{b(!0);await(0,k.om)({...e,userId:N._id});y.ZP.success("Successfully change plan limit"),E(),t(!1)})).catch((e=>{console.log("Validate Failed:",e)}))},okButtonProps:{loading:z},children:(0,_.jsxs)(c.Z,{form:M,layout:"vertical",children:[(0,_.jsx)(c.Z.Item,{name:"property",label:"Property",rules:[{required:!0,message:"Please input the count of property"}],children:(0,_.jsx)(v.Z,{className:"w-full",size:"large",min:1})}),(0,_.jsx)(c.Z.Item,{name:"document",label:"Document",rules:[{required:!0,message:"Please input the count of document"}],children:(0,_.jsx)(v.Z,{className:"w-full",size:"large",min:1})})]})})]})}},2254:(e,t,a)=>{a.d(t,{XW:()=>r,om:()=>i,rE:()=>n});var l=a(3352);const n=()=>(0,l.A_)("plans/getUserSubscription"),r=e=>(0,l.j0)("plans/createSubscription",e),i=e=>(0,l.j0)("plans/increasePlanLimit",e)}}]);
//# sourceMappingURL=546.52a143a6.chunk.js.map