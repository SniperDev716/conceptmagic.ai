"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[609],{9211:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var s=a(2791),l=a(9434),c=a(7689),n=a(1694),i=a.n(n),r=a(1692),o=a(4921),d=a(6106),u=a(914),m=a(8531),p=a(2556),g=a(7128),h=(a(8868),a(5169)),x=a(2752),f=a(3781);const v=a.p+"static/media/loading.ea020ef38ccfc2c36148.gif";const j=function(e){const t=(0,s.useRef)();return(0,s.useEffect)((()=>{t.current=e})),t.current};var I=a(184);const{TextArea:b}=r.default,{Title:w,Text:N}=o.default;const y=function(){var e,t,a;const n=(0,f.sV)(),{id:r}=(0,c.UO)(),o=(0,l.v9)((e=>e.app.isDarkMode)),[w,N]=(0,s.useState)([]),[y,E]=(0,s.useState)({}),[Z,_]=(0,s.useState)(0),[S,k]=(0,s.useState)(-1),[A,R]=(0,s.useState)([]),[C,T]=(0,s.useState)({}),[O,G]=(0,s.useState)([]),[P,U]=(0,s.useState)([]),[M,D]=(0,s.useState)([]),[L,K]=(0,s.useState)({}),B=j(y),F=j(L);(0,s.useEffect)((()=>{z()}),[]),(0,s.useEffect)((()=>(n&&(console.log("socket event added!"),n.on("IMAGE_GENERATED",(e=>{console.log("IMAGE_GENERATED"),z(),_(e.count)})),n.on("IMAGE_PROCESS",(e=>{console.log("IMAGE_PROCESS"),L[e.id]||z(),_(e.count),K((t=>({...t,[e.id]:{...e}})))}))),()=>{n&&(console.log("socket event removed!"),n.off("IMAGE_GENERATED"),n.off("IMAGE_PROCESS"))})),[n]);const z=()=>{(0,x.Jo)(r).then((e=>{E(e.data.concept),e.data.concept&&(U((t=>e.data.concept.resultImages.map(((e,a)=>t[a]?t[a]:e.prompt)))),N((t=>e.data.concept.resultImages.map(((e,a)=>!!t[a])))))})).catch((e=>{console.log(e)}))};return(0,s.useEffect)((()=>{var e,t;(null===y||void 0===y||null===(e=y.resultImages)||void 0===e?void 0:e.length)-(null===B||void 0===B||null===(t=B.resultImages)||void 0===t?void 0:t.length)==1&&window.scrollTo(0,document.body.scrollHeight)}),[null===y||void 0===y||null===(e=y.resultImages)||void 0===e?void 0:e.length]),(0,I.jsx)("div",{className:"text-center max-w-7xl w-screen mx-auto p-4",children:(0,I.jsxs)(d.Z,{gutter:[12,12],className:"sm:mt-6",children:[(0,I.jsx)(u.Z,{span:24,children:(null===(t=y.resultImages)||void 0===t?void 0:t.filter((e=>"completed"==e.status||"faild"==e.status)).length)>0?(0,I.jsxs)("h4",{className:"bg-purple-400 rounded-full p-2 px-3 !text-white sm:text-lg md:text-xl",children:["These images are ",(0,I.jsx)("span",{className:"text-black font-bold",children:"AI Generated"}),". Use words to change them however you want."]}):(0,I.jsxs)("h4",{className:"bg-purple-400 rounded-full p-2 px-3 !text-white sm:text-lg md:text-xl",children:["You are ",(0,I.jsxs)("span",{className:"text-black font-bold",children:[Number(Z)+1,"th"]})," in line for the ",(0,I.jsx)("span",{className:"text-black font-bold",children:"Free Tier"}),". Please wait 3 minutes or ",(0,I.jsx)("span",{className:"text-purple-800 font-bold",children:"Upgrade to PRO"}),"."]})}),(0,I.jsxs)("div",{className:i()("p-4 rounded shadow-none mb-4 w-full",o?"bg-gray-800":"bg-white"),children:[!y.resultImages&&(0,I.jsxs)("div",{className:"w-full h-44 bg-center bg-no-repeat bg-[length:400px_300px]",style:{backgroundImage:"url(".concat(v,")"),backgroundColor:"#E9E9EB"},children:[(0,I.jsx)("br",{}),(0,I.jsx)("br",{}),(0,I.jsx)("br",{}),(0,I.jsx)("br",{}),(0,I.jsx)("br",{}),(0,I.jsx)("br",{}),(0,I.jsx)("br",{}),(0,I.jsx)("br",{}),"Loading..."]}),null===(a=y.resultImages)||void 0===a?void 0:a.map(((e,t)=>{var a,s;return(0,I.jsxs)(d.Z,{gutter:[24,24],children:[1==t&&(0,I.jsx)(u.Z,{span:24,children:(0,I.jsx)("div",{className:"bg-black text-white p-2 rounded text-lg",children:"We've automatically created 10 versions of your initial image to show you what is possible. Read the text in purple to see the changes we told the AI to make for each version."})}),e.addition&&(0,I.jsx)(u.Z,{span:24,className:"",children:(0,I.jsx)("p",{className:i()("mb-0 text-left p-2 border-l-4 border-0 border-solid rounded-r-full",o?"border-l-gray-300 bg-gray-700 text-gray-300":"border-l-gray-500 bg-gray-100 text-gray-700"),children:e.addition})}),(null===(a=e.urls)||void 0===a?void 0:a.length)>0&&(0,I.jsx)(u.Z,{span:24,children:(0,I.jsx)("div",{children:(0,I.jsx)(m.Z.PreviewGroup,{children:(0,I.jsx)(d.Z,{gutter:[12,12],children:null===(s=e.urls)||void 0===s?void 0:s.map(((e,a)=>(0,I.jsx)(u.Z,{span:6,children:(0,I.jsx)(m.Z,{src:"".concat(h.Z.SOCKET_URL,"/image/").concat(e.split("/")[e.split("/").length-2],"/").concat(e.split("/")[e.split("/").length-1],"?w=170&h=170"),preview:{src:"".concat(e)},width:"100%"})},"".concat(t,"_").concat(a))))})})})}),"completed"!==e.status&&"failed"!==e.status&&(e.parent?y.resultImages.filter((t=>t.imageId==e.parent))[0].urls.length>0&&t>10?y.resultImages.filter((t=>t.imageId==e.parent))[0].urls.map(((a,s)=>{var l,c,n;return(0,I.jsx)(u.Z,{span:6,children:(0,I.jsxs)("div",{className:"relative flex justify-center items-center flex-col bg-gray-200",children:[(0,I.jsx)("div",{className:"relative overflow-hidden",children:(0,I.jsx)(m.Z,{src:"".concat(null!==(l=L[e.imageId])&&void 0!==l&&l.url?L[e.imageId].url:a),preview:!1,fallback:y.inputImages[0].path.includes("https://")?"".concat(y.inputImages[0].path):"".concat(h.Z.SOCKET_URL).concat(y.inputImages[0].path),className:"transition-[filter] duration-1000 ease-in-out w-full clip_".concat(null!==(c=F[e.imageId])&&void 0!==c&&c.url?s:""),alt:"product",style:{filter:"blur(".concat(null!==(n=F[e.imageId])&&void 0!==n&&n.url?"2px":"23px",")")}})}),(0,I.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full flex items-center justify-center flex-col",children:[(0,I.jsx)("span",{className:"loader"}),(0,I.jsx)("p",{className:"mb-0 text-white mt-2",children:L[e.imageId]?"".concat(L[e.imageId].status).concat("generating"==L[e.imageId].status?" (".concat(L[e.imageId].progress,"%)"):"","..."):"".concat(e.status,"...")})]})]})},"".concat(t,"_").concat(s))})):new Array(4).fill(y.inputImages[0].path.includes("https://")?"".concat(y.inputImages[0].path):"".concat(h.Z.SOCKET_URL).concat(y.inputImages[0].path)).map(((a,s)=>{var l,c,n;return(0,I.jsx)(u.Z,{span:6,children:(0,I.jsxs)("div",{className:"relative flex justify-center items-center flex-col bg-gray-200",children:[(0,I.jsx)("div",{className:"relative overflow-hidden",children:(0,I.jsx)(m.Z,{src:"".concat(null!==(l=L[e.imageId])&&void 0!==l&&l.url?L[e.imageId].url:a),preview:!1,fallback:y.inputImages[0].path.includes("https://")?"".concat(y.inputImages[0].path):"".concat(h.Z.SOCKET_URL).concat(y.inputImages[0].path),className:"transition-[filter] duration-1000 ease-in-out w-full clip_".concat(null!==(c=F[e.imageId])&&void 0!==c&&c.url?s:""),alt:"product",style:{filter:"blur(".concat(null!==(n=F[e.imageId])&&void 0!==n&&n.url?"2px":"23px",")")}})}),(0,I.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full flex items-center justify-center flex-col",children:[(0,I.jsx)("div",{className:"loader"}),(0,I.jsx)("p",{className:"mb-0 text-white mt-2",children:L[e.imageId]?"".concat(L[e.imageId].status).concat("generating"==L[e.imageId].status?" (".concat(L[e.imageId].progress,"%)"):"","..."):"".concat(e.status,"...")})]})]})},"".concat(t,"_").concat(s))})):new Array(4).fill(0).map(((a,s)=>{var l,c,n;return(0,I.jsx)(u.Z,{span:6,children:(0,I.jsxs)("div",{className:"flex justify-center items-center flex-col bg-gray-200 relative",children:[(0,I.jsx)("div",{className:"relative overflow-hidden",children:(0,I.jsx)(m.Z,{src:"".concat((null===(l=L[e.imageId])||void 0===l?void 0:l.url)||(y.inputImages[0].path.includes("https://")?"".concat(y.inputImages[0].path):"".concat(h.Z.SOCKET_URL).concat(y.inputImages[0].path))),preview:!1,fallback:y.inputImages[0].path.includes("https://")?"".concat(y.inputImages[0].path):"".concat(h.Z.SOCKET_URL).concat(y.inputImages[0].path),className:"transition-[filter] duration-1000 ease-in-out w-full clip_".concat(null!==(c=F[e.imageId])&&void 0!==c&&c.url?s:""),alt:"product",style:{filter:"blur(".concat(null!==(n=F[e.imageId])&&void 0!==n&&n.url?"2px":"23px",")")}})}),(0,I.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full flex items-center justify-center flex-col",children:[(0,I.jsx)("div",{className:"loader"}),(0,I.jsx)("p",{className:"mb-0 text-white mt-2",children:L[e.imageId]?"".concat(L[e.imageId].status).concat("generating"==L[e.imageId].status?" (".concat(L[e.imageId].progress,"%)"):"","..."):"".concat(e.status,"...")})]})]})},"".concat(t,"_").concat(s))}))),"failed"==e.status&&new Array(4).fill(0).map(((e,a)=>(0,I.jsx)(u.Z,{span:6,children:(0,I.jsx)("div",{className:"flex justify-center items-center flex-col bg-gray-200  p-5",children:(0,I.jsx)("p",{className:"mb-0",children:"Failed"})})},"".concat(t,"_").concat(a)))),(0,I.jsxs)(u.Z,{span:24,children:[(0,I.jsx)(b,{placeholder:w[t]?"":"Describe what you want to add, change, or remove from your initial renderings",autoSize:{maxRows:5},value:w[t]?P[t]:M[t],onChange:e=>{if(w[t]){let a=[...P];a[t]=e.target.value,U(a)}else{let a=[...M];a[t]=e.target.value,D(a)}},disabled:"completed"!=e.status&&"failed"!=e.status}),(0,I.jsx)("div",{className:"mt-1 text-right",children:(0,I.jsx)(p.ZP,{type:"text",disabled:"completed"!=e.status&&"failed"!=e.status,onClick:()=>{N((e=>{let a=[...e];return a[t]=!a[t],[...a]}))},children:w[t]?"Basic Mode":"Advanced"})}),(0,I.jsx)("div",{className:"text-center mb-4",children:(0,I.jsx)(p.ZP,{disabled:"completed"!=e.status&&"failed"!=e.status||S==t,type:"primary",size:"",onClick:()=>(async(e,t)=>{k(t);try{let a=await(0,x.ON)(r,{keywords:w[t]?P[t]:M[t],imageId:e,isAdvanced:w[t]});E(a.data.concept)}catch(a){console.log(a)}k(-1)})(e.imageId,t),loading:S==t,children:"Generate"})}),(0,I.jsx)(g.Z,{})]})]},t)}))]})]})})}},2752:(e,t,a)=>{a.d(t,{DN:()=>o,Jo:()=>n,ON:()=>i,_I:()=>c,aR:()=>l,mW:()=>r});var s=a(3352);const l=e=>(0,s.j0)("v1/getImageDescription",e),c=e=>(0,s.j0)("v1/deleteFile",e),n=(e,t)=>(0,s.A_)("v1/getConceptById/".concat(e),t),i=(e,t)=>(0,s.j0)("v1/generateImage/".concat(e),t),r=(e,t)=>(0,s.A_)("v1/getProjects/".concat(e||""),t),o=e=>(0,s.j0)("v1/getImagesfromPin",e)}}]);
//# sourceMappingURL=609.771b239d.chunk.js.map