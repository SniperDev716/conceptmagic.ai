"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[546],{5546:(e,a,t)=>{t.r(a),t.d(a,{default:()=>v});var l=t(2791),n=t(1087),s=t(2426),r=t.n(s),c=t(1692),o=t(3990),i=t(5140),u=t(2556),m=t(6106),d=t(914),h=t(4106),p=t(6834),g=t(7070),x=t(3832),j=t(3887),S=t(3352);const y=e=>{const[a,t]=(0,l.useState)(e);return[a,e=>{const{name:l,value:n}=e.target;t({...a,[l]:n})},()=>{t(e)}]};var k=t(2254),_=t(9434),Z=t(5821),C=t(184);const{Search:f}=c.default,{Content:I}=o.default;const v=function(){const e=(0,_.I0)(),a=(0,_.v9)((e=>e.user)),[t,s]=(0,l.useState)(!1),[c,o]=(0,l.useState)([]),[v,w]=(0,l.useState)(a.page),[z,P]=(0,l.useState)(a.total),[U,b]=(0,l.useState)(!1),[N,T]=(0,l.useState)(a.pageSize),[M,A]=(0,l.useState)(null),[E,D]=y({}),[F]=i.Z.useForm(),q=[{title:"No",dataIndex:"_id",key:"no",width:"50px",render:(e,a,t)=>(v-1)*N+t+1},{title:"Name",dataIndex:"name",key:"name"},{title:"Email",dataIndex:"email",key:"email"},{title:"UTM source",dataIndex:"utm_source",key:"utm_source"},{title:"UTM medium",dataIndex:"utm_medium",key:"utm_medium"},{title:"UTM compaign",dataIndex:"utm_compaign",key:"utm_compaign"},{title:"UTM content",dataIndex:"utm_content",key:"utm_content"},{title:"Date",dataIndex:"createdAt",key:"createdAt",render:e=>r()(e).format("MM/DD/YY hh:mm A")},{title:"Projects",dataIndex:"projects",key:"projects",render:(e,a)=>(0,C.jsx)(n.rU,{to:"/projects/".concat(a._id),children:(0,C.jsxs)(u.ZP,{size:"small",children:[(null===e||void 0===e?void 0:e.length)||0,"/",e.reduce(((e,a)=>e+a.resultImages.length),0)]})})}];(0,l.useEffect)((()=>{Y()}),[v,N]);const Y=a=>{b(!0),(async e=>{try{return(await(0,S.A_)("users",e)).data}catch(a){return console.log("[GET users error]",a),{users:[],total:0}}})({...E,page:a||v,limit:N}).then((a=>{b(!1),o(a.users.map((e=>({...e,key:e._id})))),P(a.total),e((0,Z.R)({total:a.total,page:v,pageSize:N}))}))},B=()=>{1==v?Y(1):w(1)};return(0,C.jsxs)(I,{className:"mx-auto p-2 px-5 my-5",children:[(0,C.jsxs)(m.Z,{gutter:[16,16],children:[(0,C.jsx)(d.Z,{sm:12,md:8,lg:6,xl:4,children:(0,C.jsx)(f,{placeholder:"Name...",allowClear:!0,value:E.name,name:"name",size:"large",onChange:D,onSearch:B})}),(0,C.jsx)(d.Z,{sm:12,md:8,lg:6,xl:4,children:(0,C.jsx)(f,{placeholder:"Email...",allowClear:!0,value:E.email,name:"email",size:"large",onChange:D,onSearch:B})}),(0,C.jsx)(d.Z,{sm:12,md:8,lg:6,xl:4,children:(0,C.jsx)(f,{placeholder:"Utm Source...",allowClear:!0,value:E.utm_source,name:"utm_source",size:"large",onChange:D,onSearch:B})}),(0,C.jsx)(d.Z,{sm:12,md:8,lg:6,xl:4,children:(0,C.jsx)(f,{placeholder:"Utm Campaign...",allowClear:!0,value:E.utm_campaign,name:"utm_campaign",size:"large",onChange:D,onSearch:B})}),(0,C.jsxs)(d.Z,{span:24,children:[(0,C.jsx)(h.Z,{loading:U,columns:q,dataSource:c,pagination:!1}),(0,C.jsx)("div",{className:"text-right mt-2",children:(0,C.jsx)(p.Z,{showQuickJumper:!0,showSizeChanger:!0,pageSize:N,current:v,total:z,onChange:(e,a)=>{w(e),T(a)}})})]})]}),(0,C.jsx)(g.Z,{open:t,title:"Increase plan",okText:"Submit",cancelText:"Cancel",onCancel:()=>s(!1),onOk:()=>{F.validateFields().then((async e=>{b(!0);await(0,k.om)({...e,userId:M._id});x.ZP.success("Successfully change plan limit"),Y(),s(!1)})).catch((e=>{console.log("Validate Failed:",e)}))},okButtonProps:{loading:U},children:(0,C.jsxs)(i.Z,{form:F,layout:"vertical",children:[(0,C.jsx)(i.Z.Item,{name:"property",label:"Property",rules:[{required:!0,message:"Please input the count of property"}],children:(0,C.jsx)(j.Z,{className:"w-full",size:"large",min:1})}),(0,C.jsx)(i.Z.Item,{name:"document",label:"Document",rules:[{required:!0,message:"Please input the count of document"}],children:(0,C.jsx)(j.Z,{className:"w-full",size:"large",min:1})})]})})]})}},2254:(e,a,t)=>{t.d(a,{XW:()=>s,om:()=>r,rE:()=>n});var l=t(3352);const n=()=>(0,l.A_)("plans/getUserSubscription"),s=e=>(0,l.j0)("plans/createSubscription",e),r=e=>(0,l.j0)("plans/increasePlanLimit",e)}}]);
//# sourceMappingURL=546.5f51a737.chunk.js.map