{"version":3,"file":"static/js/546.f478c9e5.chunk.js","mappings":"qRAEO,MCYP,EAZiBA,IACb,MAAOC,EAAQC,IAAaC,EAAAA,EAAAA,UAASH,GAQrC,MAAO,CAACC,EAPcG,IAClB,MAAM,KAAEC,EAAI,MAAEC,GAAUF,EAAMG,OAC9BL,EAAU,IAAKD,EAAQ,CAACI,GAAOC,GAAQ,EAEzBE,KACdN,EAAUF,EAAc,EAEY,E,uBCW5C,MAAM,OAAES,GAAWC,EAAAA,QAiSnB,QA/RA,WACE,MAAOC,EAAeC,IAAoBT,EAAAA,EAAAA,WAAS,IAC5CU,EAAOC,IAAYX,EAAAA,EAAAA,UAAS,KAC5BY,EAAMC,IAAWb,EAAAA,EAAAA,UAAS,IAC1Bc,EAAOC,IAAYf,EAAAA,EAAAA,UAAS,IAC5BgB,EAASC,IAAcjB,EAAAA,EAAAA,WAAS,IAChCkB,EAAUC,IAAenB,EAAAA,EAAAA,UAAS,KAClCoB,EAAcC,IAAmBrB,EAAAA,EAAAA,UAAS,OAC1CsB,EAAUC,GAAgBC,EAAQ,CAAC,IACnCC,GAAQC,EAAAA,EAAAA,UAETC,EAAU,CACd,CACEC,MAAO,KACPC,UAAW,MACXC,IAAK,KACLC,MAAO,OACPC,OAAQA,CAACC,EAAGC,EAAKC,KAAWvB,EAAO,GAAKM,EAAWiB,EAAQ,GAE7D,CACEP,MAAO,OACPC,UAAW,OACXC,IAAK,QAEP,CACEF,MAAO,QACPC,UAAW,QACXC,IAAK,SAsCP,CACEF,MAAO,aACPC,UAAW,aACXC,IAAK,cAEP,CACEF,MAAO,aACPC,UAAW,aACXC,IAAK,cAEP,CACEF,MAAO,eACPC,UAAW,eACXC,IAAK,gBAEP,CACEF,MAAO,cACPC,UAAW,cACXC,IAAK,eAEP,CACEF,MAAO,OACPC,UAAW,YACXC,IAAK,YACLE,OAASC,GACAG,IAAOH,GAAGI,OAAO,qBAG5B,CACET,MAAO,WACPC,UAAW,WACXC,IAAK,WACLE,OAAQA,CAACC,EAAGC,KACVI,QAAQC,IAAIN,IACLO,EAAAA,EAAAA,KAACC,EAAAA,GAAI,CAACC,GAAE,aAAAC,OAAeT,EAAIU,KAAMC,UAACC,EAAAA,EAAAA,MAACC,EAAAA,GAAM,CAACC,KAAK,QAAOH,SAAA,EAAG,OAADZ,QAAC,IAADA,OAAC,EAADA,EAAGgB,SAAU,EAAE,IAAEhB,EAAEiB,QAChF,CAACC,EAAaC,IAASD,EAAcC,EAAKC,aAAaJ,QACvD,YAiCRK,EAAAA,EAAAA,YAAU,KACRC,GAAU,GACT,CAAC3C,EAAMM,IAEV,MAAMqC,EAAYC,IAChBvC,GAAW,GFjKYwC,WACzB,IAEE,aADuBC,EAAAA,EAAAA,IAAW,QAASC,IAC3BC,IAClB,CAAE,MAAOC,GAEP,OADAvB,QAAQC,IAAI,oBAAqBsB,GAC1B,CACLnD,MAAO,GACPI,MAAO,EAEX,GEwJEgD,CAAY,IACPxC,EACHV,KAAM4C,GAAW5C,EACjBmD,MAAO7C,IACN8C,MAAMJ,IACP3C,GAAW,GACXN,EAASiD,EAAKlD,MAAMuD,KAAKC,IAAI,IAAWA,EAAMpC,IAAKoC,EAAKtB,SACxD7B,EAAS6C,EAAK9C,MAAM,GACpB,EAQEqD,EAAWA,KACH,GAARvD,EACF2C,EAAS,GAET1C,EAAQ,EACV,EAGF,OACEiC,EAAAA,EAAAA,MAAA,OAAKsB,UAAU,yBAAwBvB,SAAA,EACrCC,EAAAA,EAAAA,MAACuB,EAAAA,EAAG,CAACC,OAAQ,CAAC,GAAI,IAAIzB,SAAA,EACpBL,EAAAA,EAAAA,KAAC+B,EAAAA,EAAG,CAACC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAE9B,UAC/BL,EAAAA,EAAAA,KAAClC,EAAM,CACLsE,YAAY,UACZC,YAAU,EACV1E,MAAOmB,EAASpB,KAChBA,KAAK,OACL8C,KAAK,QACL8B,SAAUvD,EACV4C,SAAUA,OAGd3B,EAAAA,EAAAA,KAAC+B,EAAAA,EAAG,CAACC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAE9B,UAC/BL,EAAAA,EAAAA,KAAClC,EAAM,CACLsE,YAAY,WACZC,YAAU,EACV1E,MAAOmB,EAASyD,MAChB7E,KAAK,QACL8C,KAAK,QACL8B,SAAUvD,EACV4C,SAAUA,OAGd3B,EAAAA,EAAAA,KAAC+B,EAAAA,EAAG,CAACC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAE9B,UAC/BL,EAAAA,EAAAA,KAAClC,EAAM,CACLsE,YAAY,gBACZC,YAAU,EACV1E,MAAOmB,EAAS0D,WAChB9E,KAAK,aACL8C,KAAK,QACL8B,SAAUvD,EACV4C,SAAUA,OAGd3B,EAAAA,EAAAA,KAAC+B,EAAAA,EAAG,CAACC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAE9B,UAC/BL,EAAAA,EAAAA,KAAClC,EAAM,CACLsE,YAAY,kBACZC,YAAU,EACV1E,MAAOmB,EAAS2D,aAChB/E,KAAK,eACL8C,KAAK,QACL8B,SAAUvD,EACV4C,SAAUA,OAGdrB,EAAAA,EAAAA,MAACyB,EAAAA,EAAG,CAACW,KAAM,GAAGrC,SAAA,EACZL,EAAAA,EAAAA,KAAC2C,EAAAA,EAAK,CACJnE,QAASA,EACTW,QAASA,EACTyD,WAAY1E,EACZ2E,YAAY,KAEd7C,EAAAA,EAAAA,KAAA,OAAK4B,UAAU,kBAAiBvB,UAC9BL,EAAAA,EAAAA,KAAC8C,EAAAA,EAAU,CACTC,iBAAe,EACfC,iBAAe,EACftE,SAAUA,EACVsC,QAAS5C,EACTE,MAAOA,EACPgE,SA1EaW,CAACC,EAAYxE,KACpCL,EAAQ6E,GACRvE,EAAYD,EAAS,aA6EnBsB,EAAAA,EAAAA,KAACmD,EAAAA,EAAK,CACJC,KAAMpF,EACNoB,MAAM,gBACNiE,OAAO,SACPC,WAAW,SACXC,SAAUA,IAAMtF,GAAiB,GACjCuF,KAAMA,KACJvE,EACGwE,iBACAjC,MAAKP,UAEJxC,GAAW,SACOiF,EAAAA,EAAAA,IAAkB,IAC/BpG,EACHqG,OAAQ/E,EAAawB,MAEvBwD,EAAAA,GAAAA,QAAgB,kCAChB7C,IACA9C,GAAiB,EAAM,IAExB4F,OAAOC,IACNhE,QAAQC,IAAI,mBAAoB+D,EAAK,GACrC,EAENC,cAAe,CAAEvF,WAAU6B,UAE3BC,EAAAA,EAAAA,MAACpB,EAAAA,EAAI,CAACD,KAAMA,EAAM+E,OAAO,WAAU3D,SAAA,EACjCL,EAAAA,EAAAA,KAACd,EAAAA,EAAAA,KAAS,CACRxB,KAAK,WACLuG,MAAM,WACNC,MAAO,CACL,CACEC,UAAU,EACVP,QAAS,uCAEXvD,UAEFL,EAAAA,EAAAA,KAACoE,EAAAA,EAAW,CAACxC,UAAU,SAASpB,KAAK,QAAQ6D,IAAK,OAEpDrE,EAAAA,EAAAA,KAACd,EAAAA,EAAAA,KAAS,CACRxB,KAAK,WACLuG,MAAM,WACNC,MAAO,CACL,CACEC,UAAU,EACVP,QAAS,uCAEXvD,UAEFL,EAAAA,EAAAA,KAACoE,EAAAA,EAAW,CAACxC,UAAU,SAASpB,KAAK,QAAQ6D,IAAK,aAM9D,C,mECnTO,MAAMC,EAAsBA,KAAMpD,EAAAA,EAAAA,IAAW,6BACvCqD,EAAsBnD,IAASoD,EAAAA,EAAAA,IAAY,2BAA4BpD,GACvEsC,EAAqBtC,IAASoD,EAAAA,EAAAA,IAAY,0BAA2BpD,E","sources":["services/userAPI.js","Hooks/useForm.js","container/pages/Admin/Users.jsx","services/planAPI.js"],"sourcesContent":["import { getRequest } from \"./axiosClient\";\r\n\r\nexport const getAllUsers = async (query) => {\r\n  try {\r\n    const response = await getRequest('users', query);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.log('[GET users error]', error);\r\n    return {\r\n      users: [],\r\n      total: 0,\r\n    };\r\n  }\r\n};","import { useState } from 'react'\r\n\r\nconst useForm = (initialValues) => {\r\n    const [values, setValues] = useState(initialValues)\r\n    const handleChange = (event) => {\r\n        const { name, value } = event.target\r\n        setValues({ ...values, [name]: value })\r\n    }\r\n    const resetForm = () => {\r\n        setValues(initialValues)\r\n    }\r\n    return [values, handleChange, resetForm]\r\n}\r\n\r\nexport default useForm","import React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport {\r\n  Button,\r\n  Col,\r\n  Row,\r\n  Table,\r\n  Tag,\r\n  Space,\r\n  Pagination,\r\n  Input,\r\n  Modal,\r\n  Form,\r\n  InputNumber,\r\n  Tooltip,\r\n  message,\r\n} from \"antd\";\r\nimport { getAllUsers } from \"../../../services/userAPI\";\r\nimport useForm from \"../../../Hooks/useForm\";\r\nimport { increasePlanLimit } from \"../../../services/planAPI\";\r\n\r\nconst { Search } = Input;\r\n\r\nfunction Users() {\r\n  const [showGiveModal, setShowGiveModal] = useState(false);\r\n  const [users, setUsers] = useState([]);\r\n  const [page, setPage] = useState(1);\r\n  const [total, setTotal] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n  const [pageSize, setPageSize] = useState(10);\r\n  const [selectedUser, setSelectedUser] = useState(null);\r\n  const [formData, handleChange] = useForm({});\r\n  const [form] = Form.useForm();\r\n\r\n  const columns = [\r\n    {\r\n      title: \"No\",\r\n      dataIndex: \"_id\",\r\n      key: \"no\",\r\n      width: \"50px\",\r\n      render: (_, row, index) => (page - 1) * pageSize + index + 1,\r\n    },\r\n    {\r\n      title: \"Name\",\r\n      dataIndex: \"name\",\r\n      key: \"name\",\r\n    },\r\n    {\r\n      title: \"Email\",\r\n      dataIndex: \"email\",\r\n      key: \"email\",\r\n    },\r\n    // {\r\n    //   title: \"ðŸ›’\",\r\n    //   dataIndex: \"_id\",\r\n    //   key: \"activeSubscriptionId\",\r\n    //   render: (_, row) => {\r\n    //     if (row.activeSubscriptionId?.planId?.price) {\r\n    //       return (\r\n    //         <Tag color=\"#108ee9\">\r\n    //           ${row.activeSubscriptionId?.planId?.price}\r\n    //         </Tag>\r\n    //       );\r\n    //     }\r\n    //   },\r\n    // },\r\n    // {\r\n    //   title: \"Plan\",\r\n    //   dataIndex: \"plan\",\r\n    //   key: \"plan\",\r\n    //   render: (_, row) => {\r\n    //     if (row.plan) {\r\n    //       return (\r\n    //         <>\r\n    //         <Tooltip placement=\"top\" title={\"Property\"}>\r\n    //           <Tag color=\"#108ee9\">{_.property}</Tag>\r\n    //         </Tooltip>\r\n    //         <Tooltip placement=\"top\" title={\"Document\"}>\r\n    //           <Tag color=\"#108ee9\">{_.document}</Tag>\r\n    //         </Tooltip>\r\n    //         {/* <Tooltip placement=\"top\" title={\"Account\"}>\r\n    //           <Tag color=\"#108ee9\">{_.property}</Tag>\r\n    //         </Tooltip> */}\r\n    //         </>\r\n    //       );\r\n    //     }\r\n    //   },\r\n    // },\r\n    {\r\n      title: \"UTM source\",\r\n      dataIndex: \"utm_source\",\r\n      key: \"utm_source\",\r\n    },\r\n    {\r\n      title: \"UTM medium\",\r\n      dataIndex: \"utm_medium\",\r\n      key: \"utm_medium\",\r\n    },\r\n    {\r\n      title: \"UTM compaign\",\r\n      dataIndex: \"utm_compaign\",\r\n      key: \"utm_compaign\",\r\n    },\r\n    {\r\n      title: \"UTM content\",\r\n      dataIndex: \"utm_content\",\r\n      key: \"utm_content\",\r\n    },\r\n    {\r\n      title: \"Date\",\r\n      dataIndex: \"createdAt\",\r\n      key: \"createdAt\",\r\n      render: (_) => {\r\n        return moment(_).format(\"MM/DD/YY hh:mm A\");\r\n      },\r\n    },\r\n    {\r\n      title: \"Projects\",\r\n      dataIndex: \"projects\",\r\n      key: \"projects\",\r\n      render: (_, row) => {\r\n        console.log(_);\r\n        return <Link to={`/projects/${row._id}`}><Button size=\"small\">{_?.length || 0}/{_.reduce(\r\n          (accumulator, item) => accumulator + item.resultImages.length,\r\n          0,\r\n        )}</Button></Link>;\r\n      },\r\n    },\r\n    // {\r\n    //   title: \"Action\",\r\n    //   key: \"_id\",\r\n    //   render: (_, row) => (\r\n    //     <Space size=\"middle\">\r\n    //       <Button\r\n    //         type=\"primary\"\r\n    //         size=\"small\"\r\n    //         onClick={() => {\r\n    //           // if(row.activeSubscriptionId) {\r\n    //             setSelectedUser(row);\r\n    //             form.setFieldValue('property', row.plan?.property || 1);\r\n    //             form.setFieldValue('document', row.plan?.document || 1);\r\n    //             setShowGiveModal(true);\r\n    //           // } else {\r\n    //           //   message.warning(\"No active subscription.\");\r\n    //           // }\r\n    //         }}\r\n    //       >\r\n    //         Give\r\n    //       </Button>\r\n    //       <Link to={`/admin/users/${row._id}/history`}>\r\n    //         <Button type=\"dashed\" danger size=\"small\">View</Button>\r\n    //       </Link>\r\n    //     </Space>\r\n    //   ),\r\n    // },\r\n  ];\r\n\r\n  useEffect(() => {\r\n    getUsers();\r\n  }, [page, pageSize]);\r\n\r\n  const getUsers = (current) => {\r\n    setLoading(true);\r\n    getAllUsers({\r\n      ...formData,\r\n      page: current || page,\r\n      limit: pageSize,\r\n    }).then((data) => {\r\n      setLoading(false);\r\n      setUsers(data.users.map((user) => ({ ...user, key: user._id })));\r\n      setTotal(data.total);\r\n    });\r\n  };\r\n\r\n  const handlePageChange = (pageNumber, pageSize) => {\r\n    setPage(pageNumber);\r\n    setPageSize(pageSize);\r\n  };\r\n\r\n  const onSearch = () => {\r\n    if (page == 1) {\r\n      getUsers(1);\r\n    } else {\r\n      setPage(1);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mx-auto my-4\">\r\n      <Row gutter={[16, 16]}>\r\n        <Col sm={12} md={8} lg={6} xl={4}>\r\n          <Search\r\n            placeholder=\"Name...\"\r\n            allowClear\r\n            value={formData.name}\r\n            name=\"name\"\r\n            size=\"large\"\r\n            onChange={handleChange}\r\n            onSearch={onSearch}\r\n          />\r\n        </Col>\r\n        <Col sm={12} md={8} lg={6} xl={4}>\r\n          <Search\r\n            placeholder=\"Email...\"\r\n            allowClear\r\n            value={formData.email}\r\n            name=\"email\"\r\n            size=\"large\"\r\n            onChange={handleChange}\r\n            onSearch={onSearch}\r\n          />\r\n        </Col>\r\n        <Col sm={12} md={8} lg={6} xl={4}>\r\n          <Search\r\n            placeholder=\"Utm Source...\"\r\n            allowClear\r\n            value={formData.utm_source}\r\n            name=\"utm_source\"\r\n            size=\"large\"\r\n            onChange={handleChange}\r\n            onSearch={onSearch}\r\n          />\r\n        </Col>\r\n        <Col sm={12} md={8} lg={6} xl={4}>\r\n          <Search\r\n            placeholder=\"Utm Campaign...\"\r\n            allowClear\r\n            value={formData.utm_campaign}\r\n            name=\"utm_campaign\"\r\n            size=\"large\"\r\n            onChange={handleChange}\r\n            onSearch={onSearch}\r\n          />\r\n        </Col>\r\n        <Col span={24}>\r\n          <Table\r\n            loading={loading}\r\n            columns={columns}\r\n            dataSource={users}\r\n            pagination={false}\r\n          />\r\n          <div className=\"text-right mt-2\">\r\n            <Pagination\r\n              showQuickJumper\r\n              showSizeChanger\r\n              pageSize={pageSize}\r\n              current={page}\r\n              total={total}\r\n              onChange={handlePageChange}\r\n            />\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n      <Modal\r\n        open={showGiveModal}\r\n        title=\"Increase plan\"\r\n        okText=\"Submit\"\r\n        cancelText=\"Cancel\"\r\n        onCancel={() => setShowGiveModal(false)}\r\n        onOk={() => {\r\n          form\r\n            .validateFields()\r\n            .then(async (values) => {\r\n              // console.log(values);\r\n              setLoading(true);\r\n              const res = await increasePlanLimit({\r\n                ...values,\r\n                userId: selectedUser._id,\r\n              });\r\n              message.success('Successfully change plan limit');\r\n              getUsers();\r\n              setShowGiveModal(false);\r\n            })\r\n            .catch((info) => {\r\n              console.log(\"Validate Failed:\", info);\r\n            });\r\n        }}\r\n        okButtonProps={{ loading }}\r\n      >\r\n        <Form form={form} layout=\"vertical\">\r\n          <Form.Item\r\n            name=\"property\"\r\n            label=\"Property\"\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: \"Please input the count of property\",\r\n              },\r\n            ]}\r\n          >\r\n            <InputNumber className=\"w-full\" size=\"large\" min={1} />\r\n          </Form.Item>\r\n          <Form.Item\r\n            name=\"document\"\r\n            label=\"Document\"\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: \"Please input the count of document\",\r\n              },\r\n            ]}\r\n          >\r\n            <InputNumber className=\"w-full\" size=\"large\" min={1} />\r\n          </Form.Item>\r\n        </Form>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Users;\r\n","import { getRequest, postRequest } from \"./axiosClient\";\r\n\r\nexport const getUserSubscription = () => getRequest('plans/getUserSubscription');\r\nexport const createSubscription = (data) => postRequest('plans/createSubscription', data);\r\nexport const increasePlanLimit = (data) => postRequest('plans/increasePlanLimit', data);"],"names":["initialValues","values","setValues","useState","event","name","value","target","resetForm","Search","Input","showGiveModal","setShowGiveModal","users","setUsers","page","setPage","total","setTotal","loading","setLoading","pageSize","setPageSize","selectedUser","setSelectedUser","formData","handleChange","useForm","form","Form","columns","title","dataIndex","key","width","render","_","row","index","moment","format","console","log","_jsx","Link","to","concat","_id","children","_jsxs","Button","size","length","reduce","accumulator","item","resultImages","useEffect","getUsers","current","async","getRequest","query","data","error","getAllUsers","limit","then","map","user","onSearch","className","Row","gutter","Col","sm","md","lg","xl","placeholder","allowClear","onChange","email","utm_source","utm_campaign","span","Table","dataSource","pagination","Pagination","showQuickJumper","showSizeChanger","handlePageChange","pageNumber","Modal","open","okText","cancelText","onCancel","onOk","validateFields","increasePlanLimit","userId","message","catch","info","okButtonProps","layout","label","rules","required","InputNumber","min","getUserSubscription","createSubscription","postRequest"],"sourceRoot":""}