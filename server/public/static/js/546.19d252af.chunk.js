"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[546],{5546:function(e,n,t){t.r(n),t.d(n,{default:function(){return U}});var r=t(4165),a=t(5861),i=t(1413),l=t(9439),u=t(2791),c=t(1087),o=t(2426),s=t.n(o),d=t(9389),m=t(7846),p=t(2339),h=t(1431),x=t(3099),f=t(7309),Z=t(6106),g=t(914),v=t(4701),j=t(937),y=t(9428),S=t(7027),k=t(2706),_=t(3352),I=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,_.A_)("users",n);case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),console.log("[GET users error]",e.t0),e.abrupt("return",{users:[],total:0});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),w=t(4942),C=function(e){var n=(0,u.useState)(e),t=(0,l.Z)(n,2),r=t[0],a=t[1];return[r,function(e){var n=e.target,t=n.name,l=n.value;a((0,i.Z)((0,i.Z)({},r),{},(0,w.Z)({},t,l)))},function(){a(e)}]},b=t(2254),z=t(184),P=d.Z.Search;var U=function(){var e=(0,u.useState)(!1),n=(0,l.Z)(e,2),t=n[0],o=n[1],d=(0,u.useState)([]),_=(0,l.Z)(d,2),w=_[0],U=_[1],N=(0,u.useState)(1),T=(0,l.Z)(N,2),A=T[0],F=T[1],M=(0,u.useState)(0),D=(0,l.Z)(M,2),E=D[0],V=D[1],q=(0,u.useState)(!1),G=(0,l.Z)(q,2),Y=G[0],B=G[1],J=(0,u.useState)(10),L=(0,l.Z)(J,2),O=L[0],Q=L[1],W=(0,u.useState)(null),X=(0,l.Z)(W,2),$=X[0],H=X[1],K=C({}),R=(0,l.Z)(K,2),ee=R[0],ne=R[1],te=m.Z.useForm(),re=(0,l.Z)(te,1)[0],ae=[{title:"No",dataIndex:"_id",key:"no",width:"50px",render:function(e,n,t){return(A-1)*O+t+1}},{title:"Name",dataIndex:"name",key:"name"},{title:"Email",dataIndex:"email",key:"email"},{title:"\ud83d\uded2",dataIndex:"_id",key:"activeSubscriptionId",render:function(e,n){var t,r,a,i;if(null!==(t=n.activeSubscriptionId)&&void 0!==t&&null!==(r=t.planId)&&void 0!==r&&r.price)return(0,z.jsxs)(p.Z,{color:"#108ee9",children:["$",null===(a=n.activeSubscriptionId)||void 0===a||null===(i=a.planId)||void 0===i?void 0:i.price]})}},{title:"Plan",dataIndex:"plan",key:"plan",render:function(e,n){if(n.plan)return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{placement:"top",title:"Property",children:(0,z.jsx)(p.Z,{color:"#108ee9",children:e.property})}),(0,z.jsx)(h.Z,{placement:"top",title:"Document",children:(0,z.jsx)(p.Z,{color:"#108ee9",children:e.document})})]})}},{title:"UTM source",dataIndex:"utm_source",key:"utm_source"},{title:"UTM medium",dataIndex:"utm_medium",key:"utm_medium"},{title:"UTM compaign",dataIndex:"utm_compaign",key:"utm_compaign"},{title:"UTM content",dataIndex:"utm_content",key:"utm_content"},{title:"Date",dataIndex:"createdAt",key:"createdAt",render:function(e){return s()(e).format("MM/DD/YY hh:mm A")}},{title:"Action",key:"_id",render:function(e,n){return(0,z.jsxs)(x.Z,{size:"middle",children:[(0,z.jsx)(f.ZP,{type:"primary",size:"small",onClick:function(){var e,t;H(n),re.setFieldValue("property",(null===(e=n.plan)||void 0===e?void 0:e.property)||1),re.setFieldValue("document",(null===(t=n.plan)||void 0===t?void 0:t.document)||1),o(!0)},children:"Give"}),(0,z.jsx)(c.rU,{to:"/admin/users/".concat(n._id,"/history"),children:(0,z.jsx)(f.ZP,{type:"dashed",danger:!0,size:"small",children:"View"})})]})}}];(0,u.useEffect)((function(){ie()}),[A,O]);var ie=function(e){B(!0),I((0,i.Z)((0,i.Z)({},ee),{},{page:e||A,limit:O})).then((function(e){B(!1),U(e.users.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{key:e._id})}))),V(e.total)}))},le=function(){1==A?ie(1):F(1)};return(0,z.jsxs)("div",{className:"container mx-auto my-4",children:[(0,z.jsxs)(Z.Z,{gutter:[16,16],children:[(0,z.jsx)(g.Z,{sm:12,md:8,lg:6,xl:4,children:(0,z.jsx)(P,{placeholder:"Name...",allowClear:!0,value:ee.name,name:"name",size:"large",onChange:ne,onSearch:le})}),(0,z.jsx)(g.Z,{sm:12,md:8,lg:6,xl:4,children:(0,z.jsx)(P,{placeholder:"Email...",allowClear:!0,value:ee.email,name:"email",size:"large",onChange:ne,onSearch:le})}),(0,z.jsx)(g.Z,{sm:12,md:8,lg:6,xl:4,children:(0,z.jsx)(P,{placeholder:"Utm Source...",allowClear:!0,value:ee.utm_source,name:"utm_source",size:"large",onChange:ne,onSearch:le})}),(0,z.jsx)(g.Z,{sm:12,md:8,lg:6,xl:4,children:(0,z.jsx)(P,{placeholder:"Utm Campaign...",allowClear:!0,value:ee.utm_campaign,name:"utm_campaign",size:"large",onChange:ne,onSearch:le})}),(0,z.jsxs)(g.Z,{span:24,children:[(0,z.jsx)(v.Z,{loading:Y,columns:ae,dataSource:w,pagination:!1}),(0,z.jsx)("div",{className:"text-right mt-2",children:(0,z.jsx)(j.Z,{showQuickJumper:!0,showSizeChanger:!0,pageSize:O,current:A,total:E,onChange:function(e,n){F(e),Q(n)}})})]})]}),(0,z.jsx)(y.Z,{open:t,title:"Increase plan",okText:"Submit",cancelText:"Cancel",onCancel:function(){return o(!1)},onOk:function(){re.validateFields().then(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B(!0),e.next=3,(0,b.om)((0,i.Z)((0,i.Z)({},n),{},{userId:$._id}));case 3:e.sent,S.ZP.success("Successfully change plan limit"),ie(),o(!1);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){console.log("Validate Failed:",e)}))},okButtonProps:{loading:Y},children:(0,z.jsxs)(m.Z,{form:re,layout:"vertical",children:[(0,z.jsx)(m.Z.Item,{name:"property",label:"Property",rules:[{required:!0,message:"Please input the count of property"}],children:(0,z.jsx)(k.Z,{className:"w-full",size:"large",min:1})}),(0,z.jsx)(m.Z.Item,{name:"document",label:"Document",rules:[{required:!0,message:"Please input the count of document"}],children:(0,z.jsx)(k.Z,{className:"w-full",size:"large",min:1})})]})})]})}},2254:function(e,n,t){t.d(n,{XW:function(){return i},om:function(){return l},rE:function(){return a}});var r=t(3352),a=function(){return(0,r.A_)("plans/getUserSubscription")},i=function(e){return(0,r.j0)("plans/createSubscription",e)},l=function(e){return(0,r.j0)("plans/increasePlanLimit",e)}}}]);
//# sourceMappingURL=546.19d252af.chunk.js.map