"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[546],{5546:(e,a,t)=>{t.r(a),t.d(a,{default:()=>Z});var n=t(2791),l=t(1087),s=t(2426),r=t.n(s),c=t(9389),o=t(7846),i=t(7309),m=t(6106),u=t(914),d=t(4701),h=t(4099),g=t(9428),x=t(7027),p=t(2706),j=t(3352);const S=e=>{const[a,t]=(0,n.useState)(e);return[a,e=>{const{name:n,value:l}=e.target;t({...a,[n]:l})},()=>{t(e)}]};var y=t(2254),k=t(184);const{Search:_}=c.default;const Z=function(){const[e,a]=(0,n.useState)(!1),[t,s]=(0,n.useState)([]),[c,Z]=(0,n.useState)(1),[C,f]=(0,n.useState)(0),[v,I]=(0,n.useState)(!1),[w,z]=(0,n.useState)(10),[P,U]=(0,n.useState)(null),[b,N]=S({}),[T]=o.Z.useForm(),M=[{title:"No",dataIndex:"_id",key:"no",width:"50px",render:(e,a,t)=>(c-1)*w+t+1},{title:"Name",dataIndex:"name",key:"name"},{title:"Email",dataIndex:"email",key:"email"},{title:"UTM source",dataIndex:"utm_source",key:"utm_source"},{title:"UTM medium",dataIndex:"utm_medium",key:"utm_medium"},{title:"UTM compaign",dataIndex:"utm_compaign",key:"utm_compaign"},{title:"UTM content",dataIndex:"utm_content",key:"utm_content"},{title:"Date",dataIndex:"createdAt",key:"createdAt",render:e=>r()(e).format("MM/DD/YY hh:mm A")},{title:"Projects",dataIndex:"projects",key:"projects",render:(e,a)=>(console.log(e),(0,k.jsx)(l.rU,{to:"/projects/".concat(a._id),children:(0,k.jsxs)(i.ZP,{size:"small",children:[(null===e||void 0===e?void 0:e.length)||0,"/",e.reduce(((e,a)=>e+a.resultImages.length),0)]})}))}];(0,n.useEffect)((()=>{A()}),[c,w]);const A=e=>{I(!0),(async e=>{try{return(await(0,j.A_)("users",e)).data}catch(a){return console.log("[GET users error]",a),{users:[],total:0}}})({...b,page:e||c,limit:w}).then((e=>{I(!1),s(e.users.map((e=>({...e,key:e._id})))),f(e.total)}))},E=()=>{1==c?A(1):Z(1)};return(0,k.jsxs)("div",{className:"container mx-auto my-4",children:[(0,k.jsxs)(m.Z,{gutter:[16,16],children:[(0,k.jsx)(u.Z,{sm:12,md:8,lg:6,xl:4,children:(0,k.jsx)(_,{placeholder:"Name...",allowClear:!0,value:b.name,name:"name",size:"large",onChange:N,onSearch:E})}),(0,k.jsx)(u.Z,{sm:12,md:8,lg:6,xl:4,children:(0,k.jsx)(_,{placeholder:"Email...",allowClear:!0,value:b.email,name:"email",size:"large",onChange:N,onSearch:E})}),(0,k.jsx)(u.Z,{sm:12,md:8,lg:6,xl:4,children:(0,k.jsx)(_,{placeholder:"Utm Source...",allowClear:!0,value:b.utm_source,name:"utm_source",size:"large",onChange:N,onSearch:E})}),(0,k.jsx)(u.Z,{sm:12,md:8,lg:6,xl:4,children:(0,k.jsx)(_,{placeholder:"Utm Campaign...",allowClear:!0,value:b.utm_campaign,name:"utm_campaign",size:"large",onChange:N,onSearch:E})}),(0,k.jsxs)(u.Z,{span:24,children:[(0,k.jsx)(d.Z,{loading:v,columns:M,dataSource:t,pagination:!1}),(0,k.jsx)("div",{className:"text-right mt-2",children:(0,k.jsx)(h.Z,{showQuickJumper:!0,showSizeChanger:!0,pageSize:w,current:c,total:C,onChange:(e,a)=>{Z(e),z(a)}})})]})]}),(0,k.jsx)(g.Z,{open:e,title:"Increase plan",okText:"Submit",cancelText:"Cancel",onCancel:()=>a(!1),onOk:()=>{T.validateFields().then((async e=>{I(!0);await(0,y.om)({...e,userId:P._id});x.ZP.success("Successfully change plan limit"),A(),a(!1)})).catch((e=>{console.log("Validate Failed:",e)}))},okButtonProps:{loading:v},children:(0,k.jsxs)(o.Z,{form:T,layout:"vertical",children:[(0,k.jsx)(o.Z.Item,{name:"property",label:"Property",rules:[{required:!0,message:"Please input the count of property"}],children:(0,k.jsx)(p.Z,{className:"w-full",size:"large",min:1})}),(0,k.jsx)(o.Z.Item,{name:"document",label:"Document",rules:[{required:!0,message:"Please input the count of document"}],children:(0,k.jsx)(p.Z,{className:"w-full",size:"large",min:1})})]})})]})}},2254:(e,a,t)=>{t.d(a,{XW:()=>s,om:()=>r,rE:()=>l});var n=t(3352);const l=()=>(0,n.A_)("plans/getUserSubscription"),s=e=>(0,n.j0)("plans/createSubscription",e),r=e=>(0,n.j0)("plans/increasePlanLimit",e)}}]);
//# sourceMappingURL=546.f478c9e5.chunk.js.map