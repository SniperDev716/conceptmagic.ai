{"version":3,"file":"static/js/546.7a21fad4.chunk.js","mappings":"+RAEO,MCYP,EAZiBA,IACb,MAAOC,EAAQC,IAAaC,EAAAA,EAAAA,UAASH,GAQrC,MAAO,CAACC,EAPcG,IAClB,MAAM,KAAEC,EAAI,MAAEC,GAAUF,EAAMG,OAC9BL,EAAU,IAAKD,EAAQ,CAACI,GAAOC,GAAQ,EAEzBE,KACdN,EAAUF,EAAc,EAEY,E,2CCc5C,MAAM,OAAES,GAAWC,EAAAA,SACb,QAAEC,GAAYC,EAAAA,QA2SpB,QAzSA,WAEE,MAAMC,GAAWC,EAAAA,EAAAA,MAEXC,GAAYC,EAAAA,EAAAA,KAAYC,GAASA,EAAMC,QAEtCC,EAAeC,IAAoBjB,EAAAA,EAAAA,WAAS,IAC5CkB,EAAOC,IAAYnB,EAAAA,EAAAA,UAAS,KAC5BoB,EAAMC,IAAWrB,EAAAA,EAAAA,UAASY,EAAUQ,OACpCE,EAAOC,IAAYvB,EAAAA,EAAAA,UAASY,EAAUU,QACtCE,EAASC,IAAczB,EAAAA,EAAAA,WAAS,IAChC0B,EAAUC,IAAe3B,EAAAA,EAAAA,UAASY,EAAUc,WAC5CE,EAAcC,IAAmB7B,EAAAA,EAAAA,UAAS,OAC1C8B,EAAUC,GAAgBC,EAAQ,CAAC,IACnCC,GAAQC,EAAAA,EAAAA,UAETC,EAAU,CACd,CACEC,MAAO,KACPC,UAAW,MACXC,IAAK,KACLC,MAAO,OACPC,OAAQA,CAACC,EAAGC,EAAKC,KAAWvB,EAAO,GAAKM,EAAWiB,EAAQ,GAE7D,CACEP,MAAO,OACPC,UAAW,OACXC,IAAK,QAEP,CACEF,MAAO,QACPC,UAAW,QACXC,IAAK,SAsCP,CACEF,MAAO,aACPC,UAAW,aACXC,IAAK,cAEP,CACEF,MAAO,aACPC,UAAW,aACXC,IAAK,cAEP,CACEF,MAAO,eACPC,UAAW,eACXC,IAAK,gBAEP,CACEF,MAAO,cACPC,UAAW,cACXC,IAAK,eAEP,CACEF,MAAO,OACPC,UAAW,YACXC,IAAK,YACLE,OAASC,GACAG,IAAOH,GAAGI,OAAO,qBAG5B,CACET,MAAO,WACPC,UAAW,WACXC,IAAK,WACLE,OAAQA,CAACC,EAAGC,KAEHI,EAAAA,EAAAA,KAACC,EAAAA,GAAI,CAACC,GAAE,aAAAC,OAAeP,EAAIQ,KAAMC,UAACC,EAAAA,EAAAA,MAACC,EAAAA,GAAM,CAACC,KAAK,QAAOH,SAAA,EAAG,OAADV,QAAC,IAADA,OAAC,EAADA,EAAGc,SAAU,EAAE,IAAEd,EAAEe,QAChF,CAACC,EAAaC,IAASD,EAAcC,EAAKC,aAAaJ,QACvD,WAiCRK,EAAAA,EAAAA,YAAU,KACRC,GAAU,GACT,CAACzC,EAAMM,IAEV,MAAMmC,EAAYC,IAChBrC,GAAW,GF1KYsC,WACzB,IAEE,aADuBC,EAAAA,EAAAA,IAAW,QAASC,IAC3BC,IAClB,CAAE,MAAOC,GAEP,OADAC,QAAQC,IAAI,oBAAqBF,GAC1B,CACLjD,MAAO,GACPI,MAAO,EAEX,GEiKEgD,CAAY,IACPxC,EACHV,KAAM0C,GAAW1C,EACjBmD,MAAO7C,IACN8C,MAAMN,IACPzC,GAAW,GACXN,EAAS+C,EAAKhD,MAAMuD,KAAK1D,IAAI,IAAWA,EAAMuB,IAAKvB,EAAKmC,SACxD3B,EAAS2C,EAAK5C,OACdZ,GAASgE,EAAAA,EAAAA,GAAgB,CACvBpD,MAAO4C,EAAK5C,MACZF,OACAM,aACC,GACH,EAQEiD,EAAWA,KACH,GAARvD,EACFyC,EAAS,GAETxC,EAAQ,EACV,EAGF,OACE+B,EAAAA,EAAAA,MAAC5C,EAAO,CAACoE,UAAU,wBAAuBzB,SAAA,EACxCC,EAAAA,EAAAA,MAACyB,EAAAA,EAAG,CAACC,OAAQ,CAAC,GAAI,IAAI3B,SAAA,EACpBL,EAAAA,EAAAA,KAACiC,EAAAA,EAAG,CAACC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAEhC,UAC/BL,EAAAA,EAAAA,KAACxC,EAAM,CACL8E,YAAY,UACZC,YAAU,EACVlF,MAAO2B,EAAS5B,KAChBA,KAAK,OACLoD,KAAK,QACLgC,SAAUvD,EACV4C,SAAUA,OAGd7B,EAAAA,EAAAA,KAACiC,EAAAA,EAAG,CAACC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAEhC,UAC/BL,EAAAA,EAAAA,KAACxC,EAAM,CACL8E,YAAY,WACZC,YAAU,EACVlF,MAAO2B,EAASyD,MAChBrF,KAAK,QACLoD,KAAK,QACLgC,SAAUvD,EACV4C,SAAUA,OAGd7B,EAAAA,EAAAA,KAACiC,EAAAA,EAAG,CAACC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAEhC,UAC/BL,EAAAA,EAAAA,KAACxC,EAAM,CACL8E,YAAY,gBACZC,YAAU,EACVlF,MAAO2B,EAAS0D,WAChBtF,KAAK,aACLoD,KAAK,QACLgC,SAAUvD,EACV4C,SAAUA,OAGd7B,EAAAA,EAAAA,KAACiC,EAAAA,EAAG,CAACC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAEhC,UAC/BL,EAAAA,EAAAA,KAACxC,EAAM,CACL8E,YAAY,kBACZC,YAAU,EACVlF,MAAO2B,EAAS2D,aAChBvF,KAAK,eACLoD,KAAK,QACLgC,SAAUvD,EACV4C,SAAUA,OAGdvB,EAAAA,EAAAA,MAAC2B,EAAAA,EAAG,CAACW,KAAM,GAAGvC,SAAA,EACZL,EAAAA,EAAAA,KAAC6C,EAAAA,EAAK,CACJnE,QAASA,EACTW,QAASA,EACTyD,WAAY1E,EACZ2E,YAAY,KAEd/C,EAAAA,EAAAA,KAAA,OAAK8B,UAAU,kBAAiBzB,UAC9BL,EAAAA,EAAAA,KAACgD,EAAAA,EAAU,CACTC,iBAAe,EACfC,iBAAe,EACftE,SAAUA,EACVoC,QAAS1C,EACTE,MAAOA,EACPgE,SA1EaW,CAACC,EAAYxE,KACpCL,EAAQ6E,GACRvE,EAAYD,EAAS,aA6EnBoB,EAAAA,EAAAA,KAACqD,EAAAA,EAAK,CACJC,KAAMpF,EACNoB,MAAM,gBACNiE,OAAO,SACPC,WAAW,SACXC,SAAUA,IAAMtF,GAAiB,GACjCuF,KAAMA,KACJvE,EACGwE,iBACAjC,MAAKT,UAEJtC,GAAW,SACOiF,EAAAA,EAAAA,IAAkB,IAC/B5G,EACH6G,OAAQ/E,EAAasB,MAEvB0D,EAAAA,GAAAA,QAAgB,kCAChB/C,IACA5C,GAAiB,EAAM,IAExB4F,OAAOC,IACN1C,QAAQC,IAAI,mBAAoByC,EAAK,GACrC,EAENC,cAAe,CAAEvF,WAAU2B,UAE3BC,EAAAA,EAAAA,MAAClB,EAAAA,EAAI,CAACD,KAAMA,EAAM+E,OAAO,WAAU7D,SAAA,EACjCL,EAAAA,EAAAA,KAACZ,EAAAA,EAAAA,KAAS,CACRhC,KAAK,WACL+G,MAAM,WACNC,MAAO,CACL,CACEC,UAAU,EACVP,QAAS,uCAEXzD,UAEFL,EAAAA,EAAAA,KAACsE,EAAAA,EAAW,CAACxC,UAAU,SAAStB,KAAK,QAAQ+D,IAAK,OAEpDvE,EAAAA,EAAAA,KAACZ,EAAAA,EAAAA,KAAS,CACRhC,KAAK,WACL+G,MAAM,WACNC,MAAO,CACL,CACEC,UAAU,EACVP,QAAS,uCAEXzD,UAEFL,EAAAA,EAAAA,KAACsE,EAAAA,EAAW,CAACxC,UAAU,SAAStB,KAAK,QAAQ+D,IAAK,aAM9D,C","sources":["services/userAPI.js","Hooks/useForm.js","container/pages/Admin/Users.jsx"],"sourcesContent":["import { getRequest } from \"./axiosClient\";\r\n\r\nexport const getAllUsers = async (query) => {\r\n  try {\r\n    const response = await getRequest('users', query);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.log('[GET users error]', error);\r\n    return {\r\n      users: [],\r\n      total: 0,\r\n    };\r\n  }\r\n};","import { useState } from 'react'\r\n\r\nconst useForm = (initialValues) => {\r\n    const [values, setValues] = useState(initialValues)\r\n    const handleChange = (event) => {\r\n        const { name, value } = event.target\r\n        setValues({ ...values, [name]: value })\r\n    }\r\n    const resetForm = () => {\r\n        setValues(initialValues)\r\n    }\r\n    return [values, handleChange, resetForm]\r\n}\r\n\r\nexport default useForm","import React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport {\r\n  Button,\r\n  Col,\r\n  Row,\r\n  Table,\r\n  Tag,\r\n  Space,\r\n  Pagination,\r\n  Input,\r\n  Modal,\r\n  Form,\r\n  InputNumber,\r\n  Tooltip,\r\n  message,\r\n  Layout,\r\n} from \"antd\";\r\nimport { getAllUsers } from \"../../../services/userAPI\";\r\nimport useForm from \"../../../Hooks/useForm\";\r\nimport { increasePlanLimit } from \"../../../services/planAPI\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { updatePageState } from \"../../../redux/user/userSlice\";\r\n\r\nconst { Search } = Input;\r\nconst { Content } = Layout;\r\n\r\nfunction Users() {\r\n\r\n  const dispatch = useDispatch();\r\n  \r\n  const pageState = useSelector(state => state.user);\r\n\r\n  const [showGiveModal, setShowGiveModal] = useState(false);\r\n  const [users, setUsers] = useState([]);\r\n  const [page, setPage] = useState(pageState.page);\r\n  const [total, setTotal] = useState(pageState.total);\r\n  const [loading, setLoading] = useState(false);\r\n  const [pageSize, setPageSize] = useState(pageState.pageSize);\r\n  const [selectedUser, setSelectedUser] = useState(null);\r\n  const [formData, handleChange] = useForm({});\r\n  const [form] = Form.useForm();\r\n\r\n  const columns = [\r\n    {\r\n      title: \"No\",\r\n      dataIndex: \"_id\",\r\n      key: \"no\",\r\n      width: \"50px\",\r\n      render: (_, row, index) => (page - 1) * pageSize + index + 1,\r\n    },\r\n    {\r\n      title: \"Name\",\r\n      dataIndex: \"name\",\r\n      key: \"name\",\r\n    },\r\n    {\r\n      title: \"Email\",\r\n      dataIndex: \"email\",\r\n      key: \"email\",\r\n    },\r\n    // {\r\n    //   title: \"ðŸ›’\",\r\n    //   dataIndex: \"_id\",\r\n    //   key: \"activeSubscriptionId\",\r\n    //   render: (_, row) => {\r\n    //     if (row.activeSubscriptionId?.planId?.price) {\r\n    //       return (\r\n    //         <Tag color=\"#108ee9\">\r\n    //           ${row.activeSubscriptionId?.planId?.price}\r\n    //         </Tag>\r\n    //       );\r\n    //     }\r\n    //   },\r\n    // },\r\n    // {\r\n    //   title: \"Plan\",\r\n    //   dataIndex: \"plan\",\r\n    //   key: \"plan\",\r\n    //   render: (_, row) => {\r\n    //     if (row.plan) {\r\n    //       return (\r\n    //         <>\r\n    //         <Tooltip placement=\"top\" title={\"Property\"}>\r\n    //           <Tag color=\"#108ee9\">{_.property}</Tag>\r\n    //         </Tooltip>\r\n    //         <Tooltip placement=\"top\" title={\"Document\"}>\r\n    //           <Tag color=\"#108ee9\">{_.document}</Tag>\r\n    //         </Tooltip>\r\n    //         {/* <Tooltip placement=\"top\" title={\"Account\"}>\r\n    //           <Tag color=\"#108ee9\">{_.property}</Tag>\r\n    //         </Tooltip> */}\r\n    //         </>\r\n    //       );\r\n    //     }\r\n    //   },\r\n    // },\r\n    {\r\n      title: \"UTM source\",\r\n      dataIndex: \"utm_source\",\r\n      key: \"utm_source\",\r\n    },\r\n    {\r\n      title: \"UTM medium\",\r\n      dataIndex: \"utm_medium\",\r\n      key: \"utm_medium\",\r\n    },\r\n    {\r\n      title: \"UTM compaign\",\r\n      dataIndex: \"utm_compaign\",\r\n      key: \"utm_compaign\",\r\n    },\r\n    {\r\n      title: \"UTM content\",\r\n      dataIndex: \"utm_content\",\r\n      key: \"utm_content\",\r\n    },\r\n    {\r\n      title: \"Date\",\r\n      dataIndex: \"createdAt\",\r\n      key: \"createdAt\",\r\n      render: (_) => {\r\n        return moment(_).format(\"MM/DD/YY hh:mm A\");\r\n      },\r\n    },\r\n    {\r\n      title: \"Projects\",\r\n      dataIndex: \"projects\",\r\n      key: \"projects\",\r\n      render: (_, row) => {\r\n        // console.log(_);\r\n        return <Link to={`/projects/${row._id}`}><Button size=\"small\">{_?.length || 0}/{_.reduce(\r\n          (accumulator, item) => accumulator + item.resultImages.length,\r\n          0,\r\n        )}</Button></Link>;\r\n      },\r\n    },\r\n    // {\r\n    //   title: \"Action\",\r\n    //   key: \"_id\",\r\n    //   render: (_, row) => (\r\n    //     <Space size=\"middle\">\r\n    //       <Button\r\n    //         type=\"primary\"\r\n    //         size=\"small\"\r\n    //         onClick={() => {\r\n    //           // if(row.activeSubscriptionId) {\r\n    //             setSelectedUser(row);\r\n    //             form.setFieldValue('property', row.plan?.property || 1);\r\n    //             form.setFieldValue('document', row.plan?.document || 1);\r\n    //             setShowGiveModal(true);\r\n    //           // } else {\r\n    //           //   message.warning(\"No active subscription.\");\r\n    //           // }\r\n    //         }}\r\n    //       >\r\n    //         Give\r\n    //       </Button>\r\n    //       <Link to={`/admin/users/${row._id}/history`}>\r\n    //         <Button type=\"dashed\" danger size=\"small\">View</Button>\r\n    //       </Link>\r\n    //     </Space>\r\n    //   ),\r\n    // },\r\n  ];\r\n\r\n  useEffect(() => {\r\n    getUsers();\r\n  }, [page, pageSize]);\r\n\r\n  const getUsers = (current) => {\r\n    setLoading(true);\r\n    getAllUsers({\r\n      ...formData,\r\n      page: current || page,\r\n      limit: pageSize,\r\n    }).then((data) => {\r\n      setLoading(false);\r\n      setUsers(data.users.map((user) => ({ ...user, key: user._id })));\r\n      setTotal(data.total);\r\n      dispatch(updatePageState({\r\n        total: data.total,\r\n        page,\r\n        pageSize,\r\n      }));\r\n    });\r\n  };\r\n\r\n  const handlePageChange = (pageNumber, pageSize) => {\r\n    setPage(pageNumber);\r\n    setPageSize(pageSize);\r\n  };\r\n\r\n  const onSearch = () => {\r\n    if (page == 1) {\r\n      getUsers(1);\r\n    } else {\r\n      setPage(1);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Content className=\"mx-auto p-2 px-5 my-5\">\r\n      <Row gutter={[16, 16]}>\r\n        <Col sm={12} md={8} lg={6} xl={4}>\r\n          <Search\r\n            placeholder=\"Name...\"\r\n            allowClear\r\n            value={formData.name}\r\n            name=\"name\"\r\n            size=\"large\"\r\n            onChange={handleChange}\r\n            onSearch={onSearch}\r\n          />\r\n        </Col>\r\n        <Col sm={12} md={8} lg={6} xl={4}>\r\n          <Search\r\n            placeholder=\"Email...\"\r\n            allowClear\r\n            value={formData.email}\r\n            name=\"email\"\r\n            size=\"large\"\r\n            onChange={handleChange}\r\n            onSearch={onSearch}\r\n          />\r\n        </Col>\r\n        <Col sm={12} md={8} lg={6} xl={4}>\r\n          <Search\r\n            placeholder=\"Utm Source...\"\r\n            allowClear\r\n            value={formData.utm_source}\r\n            name=\"utm_source\"\r\n            size=\"large\"\r\n            onChange={handleChange}\r\n            onSearch={onSearch}\r\n          />\r\n        </Col>\r\n        <Col sm={12} md={8} lg={6} xl={4}>\r\n          <Search\r\n            placeholder=\"Utm Campaign...\"\r\n            allowClear\r\n            value={formData.utm_campaign}\r\n            name=\"utm_campaign\"\r\n            size=\"large\"\r\n            onChange={handleChange}\r\n            onSearch={onSearch}\r\n          />\r\n        </Col>\r\n        <Col span={24}>\r\n          <Table\r\n            loading={loading}\r\n            columns={columns}\r\n            dataSource={users}\r\n            pagination={false}\r\n          />\r\n          <div className=\"text-right mt-2\">\r\n            <Pagination\r\n              showQuickJumper\r\n              showSizeChanger\r\n              pageSize={pageSize}\r\n              current={page}\r\n              total={total}\r\n              onChange={handlePageChange}\r\n            />\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n      <Modal\r\n        open={showGiveModal}\r\n        title=\"Increase plan\"\r\n        okText=\"Submit\"\r\n        cancelText=\"Cancel\"\r\n        onCancel={() => setShowGiveModal(false)}\r\n        onOk={() => {\r\n          form\r\n            .validateFields()\r\n            .then(async (values) => {\r\n              // console.log(values);\r\n              setLoading(true);\r\n              const res = await increasePlanLimit({\r\n                ...values,\r\n                userId: selectedUser._id,\r\n              });\r\n              message.success('Successfully change plan limit');\r\n              getUsers();\r\n              setShowGiveModal(false);\r\n            })\r\n            .catch((info) => {\r\n              console.log(\"Validate Failed:\", info);\r\n            });\r\n        }}\r\n        okButtonProps={{ loading }}\r\n      >\r\n        <Form form={form} layout=\"vertical\">\r\n          <Form.Item\r\n            name=\"property\"\r\n            label=\"Property\"\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: \"Please input the count of property\",\r\n              },\r\n            ]}\r\n          >\r\n            <InputNumber className=\"w-full\" size=\"large\" min={1} />\r\n          </Form.Item>\r\n          <Form.Item\r\n            name=\"document\"\r\n            label=\"Document\"\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: \"Please input the count of document\",\r\n              },\r\n            ]}\r\n          >\r\n            <InputNumber className=\"w-full\" size=\"large\" min={1} />\r\n          </Form.Item>\r\n        </Form>\r\n      </Modal>\r\n    </Content>\r\n  );\r\n}\r\n\r\nexport default Users;\r\n"],"names":["initialValues","values","setValues","useState","event","name","value","target","resetForm","Search","Input","Content","Layout","dispatch","useDispatch","pageState","useSelector","state","user","showGiveModal","setShowGiveModal","users","setUsers","page","setPage","total","setTotal","loading","setLoading","pageSize","setPageSize","selectedUser","setSelectedUser","formData","handleChange","useForm","form","Form","columns","title","dataIndex","key","width","render","_","row","index","moment","format","_jsx","Link","to","concat","_id","children","_jsxs","Button","size","length","reduce","accumulator","item","resultImages","useEffect","getUsers","current","async","getRequest","query","data","error","console","log","getAllUsers","limit","then","map","updatePageState","onSearch","className","Row","gutter","Col","sm","md","lg","xl","placeholder","allowClear","onChange","email","utm_source","utm_campaign","span","Table","dataSource","pagination","Pagination","showQuickJumper","showSizeChanger","handlePageChange","pageNumber","Modal","open","okText","cancelText","onCancel","onOk","validateFields","increasePlanLimit","userId","message","catch","info","okButtonProps","layout","label","rules","required","InputNumber","min"],"sourceRoot":""}